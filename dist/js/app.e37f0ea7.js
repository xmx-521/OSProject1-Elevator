(function(e){function t(t){for(var r,i,u=t[0],c=t[1],l=t[2],f=0,d=[];f<u.length;f++)i=u[f],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);a&&a(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],r=!0,u=1;u<o.length;u++){var c=o[u];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=o[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=r,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(o,r,function(t){return e[t]}.bind(null,r));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var a=c;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"1a97":function(e,t,o){},"3aaf":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var r=o("7a23"),n=o("3fd4"),s=(o("7dd6"),{style:{overflow:"auto"}});function i(e,t,o,n,i,u){var c=this,l=Object(r["K"])("outer-panel"),a=Object(r["K"])("elevator");return Object(r["D"])(),Object(r["i"])(r["b"],null,[Object(r["m"])("div",null,[Object(r["m"])(l,{floorNum:this.floorNum,upRequests:this.upRequests,downRequests:this.downRequests,onAdd:u.changeRequest,ref:"pannel"},null,8,["floorNum","upRequests","downRequests","onAdd"])]),Object(r["m"])("div",s,[(Object(r["D"])(!0),Object(r["i"])(r["b"],null,Object(r["I"])(this.elevatorNum,(function(e){return Object(r["D"])(),Object(r["i"])(a,{ref:u.setItemRef,key:e,floorNum:c.floorNum,upRequests:c.upRequests,downRequests:c.downRequests},null,8,["floorNum","upRequests","downRequests"])})),128))])],64)}var u=o("2909"),c=(o("d81d"),{class:"left"}),l={class:"floorInfo"},a={class:"left currentFloor"},f={class:"bg-gray-100 shadow-2xl elevatorInside left"},d={class:"elevatorBoarderLeft left"},p={class:"elevatorBoarderRight right"};function b(e,t,o,n,s,i){var u=this,b=Object(r["K"])("el-button");return Object(r["D"])(),Object(r["i"])("div",c,[Object(r["m"])("div",{class:["indicateLight",i.indicateLightStyle]},[Object(r["m"])("div",l,[Object(r["m"])("div",{class:["el-icon-caret-top left arrow leftArrow",i.arrowStyle(1)]},null,2),Object(r["m"])("div",a,Object(r["O"])(this.currentFloor)+"F ",1),Object(r["m"])("div",{class:["el-icon-caret-bottom right arrow rightArrow",i.arrowStyle(-1)]},null,2)]),Object(r["m"])("div",{class:i.indicateLightStyle},Object(r["O"])(this.isBusy?"忙碌":"空闲"),3)],2),Object(r["m"])("div",f,[Object(r["m"])("div",d,[(Object(r["D"])(!0),Object(r["i"])(r["b"],null,Object(r["I"])(this.floorNum,(function(e){return Object(r["D"])(),Object(r["i"])("div",{key:e,class:["floorNumber",i.numberBackground(u.floorNum+1-e)]},Object(r["O"])(u.floorNum+1-e),3)})),128))]),Object(r["m"])("div",{class:"floor left bg-gray-400",style:{"margin-top":i.topGap}},[Object(r["m"])("div",{class:"door left ",style:{"margin-left":i.doorGap}},null,4),Object(r["m"])("div",{class:"door right",style:{"margin-right":i.doorGap}},null,4)],4),Object(r["m"])("div",p,[(Object(r["D"])(!0),Object(r["i"])(r["b"],null,Object(r["I"])(this.floorNum/2,(function(e){return Object(r["D"])(),Object(r["i"])("div",{key:e},[(Object(r["D"])(),Object(r["i"])(r["b"],null,Object(r["I"])(2,(function(t){return Object(r["m"])(b,{key:t,size:"mini",type:"primary",class:i.buttonBackground(u.floorNum+t-2*e-1),circle:"",onClick:function(o){return i.selectFloor(u.floorNum+t-2*e,o)}},{default:Object(r["Z"])((function(){return[Object(r["l"])(Object(r["O"])(u.floorNum+t-2*e),1)]})),_:2},1032,["class","onClick"])})),64))])})),128)),Object(r["m"])("div",null,[Object(r["m"])(b,{type:"success",icon:"el-icon-phone",circle:""}),Object(r["m"])(b,{type:"danger",icon:"el-icon-message-solid",circle:""})])])])])}o("a9e3"),o("d3b7"),o("25f0");var m={name:"Elevator",props:{floorNum:{type:Number,default:20,downRequests:Object(u["a"])(Array(20)).map((function(){return!1})),upRequests:Object(u["a"])(Array(20)).map((function(){return!1}))}},data:function(){return{currentFloor:1,topGapNumber:570,doorGapNumber:19.5,selectedFloor:Object(u["a"])(Array(20)).map((function(){return!1})),assignedDownRequests:Object(u["a"])(Array(20)).map((function(){return!1})),assignedUpRequests:Object(u["a"])(Array(20)).map((function(){return!1})),moveDirection:1}},computed:{isBusy:function(){for(var e=!0,t=0;t<this.floorNum;t++)if(!0===this.selectedFloor[t]){e=!1;break}return!e},topGap:function(){return"".concat(this.topGapNumber,"px")},doorGap:function(){return"".concat(this.doorGapNumber,"px")},indicateLightStyle:function(){return this.isBusy?"busy":"free"}},mounted:function(){},methods:{selectFloor:function(e,t){console.log(this.isBusy),this.clickHandler(t),!1===this.isBusy?(this.selectedFloor[e-1]=!0,this.moveOneFloor()):this.selectedFloor[e-1]=!0},assignRequest:function(e,t){1===t?this.assignedUpRequests[e-1]=!0:this.assignedDownRequests[e-1]=!0},moveOneFloor:function(){var e=this;if(this.computeMoveDirection(),!0===this.selectedFloor[this.currentFloor-1])this.openTheDoor();else var t=setInterval((function(){e.arriveAnotherFloor()&&(clearInterval(t),e.currentFloor=e.currentFloor+e.moveDirection,console.log(e.currentFloor),!0===e.selectedFloor[e.currentFloor-1]?e.openTheDoor():e.moveOneFloor()),e.topGapNumber=e.topGapNumber-e.moveDirection}),33)},arriveAnotherFloor:function(){return 1===this.moveDirection&&this.topGapNumber<=this.getTopGap(this.currentFloor+1)||-1===this.moveDirection&&this.topGapNumber>=this.getTopGap(this.currentFloor-1)},getTopGap:function(e){return 600-30*e},computeMoveDirection:function(){if(1===this.moveDirection){this.moveDirection=-1;for(var e=this.currentFloor-1;e<this.floorNum;e++)if(!0===this.selectedFloor[e]||!0===this.assignedUpRequests[e]||!0===this.assignedDownRequests[e]){this.moveDirection=1;break}}else{this.moveDirection=1;for(var t=0;t<this.currentFloor;t++)if(!0===this.selectedFloor[t]||!0===this.assignedDownRequests[t]||!0===this.assignedDownRequests[t]){this.moveDirection=-1;break}}},openTheDoor:function(){var e=this;setTimeout((function(){var t=setInterval((function(){e.doorGapNumber<=.5&&(clearInterval(t),e.closeTheDoor()),e.doorGapNumber=e.doorGapNumber-.5}),20)}),500)},closeTheDoor:function(){var e=this;setTimeout((function(){var t=setInterval((function(){if(e.doorGapNumber>=19.5){if(clearInterval(t),e.selectedFloor[e.currentFloor-1]=!1,!1===e.isBusy)return;setTimeout((function(){e.moveOneFloor()}),500)}e.doorGapNumber=e.doorGapNumber+.5}),25)}),2e3)},clickHandler:function(e){var t=e.target;"SPAN"==t.nodeName&&(t=e.target.parentNode),t.blur()},buttonBackground:function(e){return!1===this.selectedFloor[e]?"white":"blue"},numberBackground:function(e){return this.currentFloor===e?"blue":"bogus"},arrowStyle:function(e){return this.isBusy&&e===this.moveDirection?"arrowSelected":"arrowUnSelected"},console:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){console.log("我是子组件的方法")})),getFarestFloor:function(e){if(-1===e){for(var t=20,o=0;o<this.floorNum;o++)!0!==this.selectedFloor[o]&&!0!==this.assignedUpRequests[o]&&!0!==this.assignedDownRequests[o]||(t=o+1);return t}if(1===e){for(var r=1,n=this.floorNum-1;n>=0;n--)!0!==this.selectedFloor[n]&&!0!==this.assignedUpRequests[n]&&!0!==this.assignedDownRequests[n]||(r=n+1);return r}},getStopTimes:function(e,t,o){for(var r=0,n=e-1;n<o;n++)!0===this.selectedFloor[n]&&r++,(!0===this.assignedUpRequests[n]&&1===t||!0===this.assignedDownRequests[n]&&-1===t)&&r++;return r}}};o("9e2c");m.render=b;var h=m,v={class:"pannelBackground"};function O(e,t,o,n,s,i){var u=Object(r["K"])("el-button"),c=Object(r["K"])("el-button-group");return Object(r["D"])(),Object(r["i"])("div",v,[(Object(r["D"])(!0),Object(r["i"])(r["b"],null,Object(r["I"])(this.floorNum,(function(e){return Object(r["D"])(),Object(r["i"])("div",{key:e,class:"left pannelButton"},[Object(r["m"])("div",null,Object(r["O"])(e)+"F ",1),Object(r["m"])(c,null,{default:Object(r["Z"])((function(){return[Object(r["m"])(u,{type:"primary",icon:"el-icon-top",circle:"",onClick:function(t){return i.addRequest(e,1,t)},class:i.getButtonClass(e,1)},null,8,["onClick","class"]),Object(r["m"])(u,{type:"primary",icon:"el-icon-bottom",circle:"",onClick:function(t){return i.addRequest(e,-1,t)},class:i.getButtonClass(e,-1)},null,8,["onClick","class"])]})),_:2},1024)])})),128))])}var j={name:"OuterPanel",props:{floorNum:{type:Number,default:20},upRequests:{type:Array,default:Object(u["a"])(Array(20)).map((function(){return!1}))},downRequests:{type:Array,default:Object(u["a"])(Array(20)).map((function(){return!1}))}},emits:["add"],methods:{clickHandler:function(e){var t=e.target;" SPAN"==t.nodeName&&(t=e.target.parentNode),t.blur()},addRequest:function(e,t,o){this.clickHandler(o),console.log("emit"),this.$emit("add",{floor:e,direction:t,state:!0})},getButtonClass:function(e,t){return 1===t?!0===this.upRequests[e-1]?"pannelSelected":"pannelUnSelected":!0===this.downRequests[e-1]?"pannelSelected":"pannelUnSelected"}}};o("aefa");j.render=O;var g=j,y={name:"App",data:function(){return{elevatorNum:5,floorNum:20,upRequests:Object(u["a"])(Array(20)).map((function(){return!1})),downRequests:Object(u["a"])(Array(20)).map((function(){return!1})),ItemRefs:[]}},components:{Elevator:h,OuterPanel:g},methods:{changeRequest:function(e){1===e.direction?this.upRequests[e.floor-1]=e.state:this.downRequests[e.floor-1]=e.state,this.disPatchRequest(e.floor,e.direction)},setItemRef:function(e){this.ItemRefs.push(e)},dispatchRequest:function(e,t){for(var o=0;o<this.elevatorNum;o++)this.ItemRefs[o].direction}}};o("fc4f");y.render=i;var R=y,N=Object(r["h"])(R);N.use(n["a"]),N.mount("#app")},"90c1":function(e,t,o){},"9e2c":function(e,t,o){"use strict";o("3aaf")},aefa:function(e,t,o){"use strict";o("90c1")},fc4f:function(e,t,o){"use strict";o("1a97")}});
//# sourceMappingURL=app.e37f0ea7.js.map